<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Gruntダイエットで健やかな開発を</title>
    <meta name="viewport" content="width=device-width">
<!-- OGPtoka -->

    <meta property="og:description" content="Gruntタスクでダイエットする話ではないです。Gruntfile.jsを10行にした話@wa..." />
    <meta property="og:title" content="Gruntダイエットで健やかな開発を" />
    <meta property="og:type" content="website" />
    
      <meta property="og:url" content="http://nakajmg.github.io/blog/2014-01-28/gruntworkflow.html" />
    
    <meta property="og:site_name" content="じまぐてっく" />
    <meta property="og:image" content="http://nakajmg.github.io/img/tech.png" />
    
      <meta property="article:published_time" content="2014-01-28" />
    

<!-- OGPtoka -->

    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
  </head>
  <body>
    <section class="global-wrapper">
      <header class="global-header">
        <div class="global-header__logo">
          <h1><a href="/"><img src="/img/logo.png" alt="じまぐてっく"></a></h1>
        </div>
        <nav class="global-nav">
          <a href="/">HOME</a><span> | </span>
          <a href="/about.html">ABOUT</a>
        </nav>
        <div class="global-header__follow">
          <div class="global-header__icons">
            <span class="follow-icon">
              <a href="https://twitter.com/nakajmg" target="_blank"><i class="icon-twitter"></i></a>
            </span>
            <span class="follow-icon">
              <a href="https://github.com/nakajmg" target="_blank"><i class="icon-github-alt"></i></a>
            </span>
            <span class="follow-icon">
              <a href="http://qiita.com/nakajmg" target="_blank" class="icon__qiita"></a>
            </span>
          </div>
          <span>@nakajmg</span>
        </div>
      </header>

      <div  class="content-wrapper">
        <article class="content">
    <header class="content-header">
        <h2 class="content-title">Gruntダイエットで健やかな開発を</h2>
        <p class="content-date">2014-01-28</p>
    </header>

    <p><img src="/img/photo/2014-1-28.jpg" alt="/img/photo/2014-1-28.jpg"></p>

<p>Gruntタスクでダイエットする話ではないです。</p>

<p><a href="http://qiita.com/watilde/items/278ce0593339072d5627">Gruntfile.jsを10行にした話@watilde on Qiita</a></p>

<p>このエントリを見てGruntfileのダイエットをしてみた。</p>

<h2>激ヤセGruntfile</h2>

<script src="https://gist.github.com/nakajmg/8655997.js?file=Gruntfile.js"></script>

<p>コメントを消せば9行。スッキリ！</p>

<h2>config.jsでタスクの管理</h2>

<script src="https://gist.github.com/nakajmg/8655997.js?file=config.js"></script>

<p>使うタスクは<code>connect: require(&quot;./connect&quot;)</code>な感じで指定。<code>require</code>で指定するのは<code>grunt.initConfig</code>に記述していた内容が書いてあるファイル。
パスは<code>config.js</code>から見た相対パスで指定。</p>

<h3>package.json</h3>

<p>package.jsonは普通。</p>

<script src="https://gist.github.com/nakajmg/8655997.js?file=package.json"></script>

<h2>各タスクの中身</h2>

<p>タスクファイルの中身はこんな感じ。</p>

<script src="https://gist.github.com/nakajmg/8655997.js?file=connect.js"></script>

<script src="https://gist.github.com/nakajmg/8655997.js?file=sass.js"></script>

<script src="https://gist.github.com/nakajmg/8655997.js?file=autoprefixer.js"></script>

<script src="https://gist.github.com/nakajmg/8655997.js?file=watch.js"></script>

<p>これらのファイルを<code>config.js</code>で指定して使う。なんのタスクなのかファイルの先頭にコメントで入れておくと良い気がするので入れてる。</p>

<p>かなり管理しやすい。再利用も容易。</p>

<h2>良い</h2>

<p>普通に<code>Gruntfile</code>に全部記述するやり方のときはプロジェクト毎に合わせたタスクを毎回書いてた。
コピペで使うにしてもちょっと手間がかかる。</p>

<p>このやり方だと自分用のテンプレを容易して</p>

<ul>
<li>コピーして<code>config.js</code>で使いたいタスクを指定</li>
<li>各タスクを編集(パスの書き換えとか)</li>
</ul>

<p>するだけで済む。一度書いたタスクの再利用性が抜群に上がった。高まる。</p>

<h2>自分用Gruntのスケルトンを作ろう</h2>

<p>GruntのスケルトンをGitHubに作った。</p>

<p><a href="https://github.com/nakajmg/GruntTemplate">nakajmg/GruntTemplate</a></p>

<p>ターミナルでこんな感じで使えばすぐに作業に入れる。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">git clone git@github.com:nakajmg/GruntTemplate destfoldername
rm -rf destfoldername/.git
cd destfoldername
npm install
</code></pre></div>
<p>bashの関数に登録して全部コマンド一発でやってくれるようにした。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">myGrunt(){
  if [ $# -ne 1 ]; then
    echo &quot;usage:myGrunt need destfoldername&quot;
  else
    command git clone git@github.com:nakajmg/GruntTemplate $1
    command rm -rf $1/.git
    command cd $1
    command npm install
  fi
}
</code></pre></div>
<p>これで<code>myGrunt</code>に引数でフォルダ名指定すれば<code>npm install</code>まで勝手にやってくれる。楽。</p>

<hr>

<p>「このタスクどう書くんだっけなー。前に書いたGruntfileどこにあったかなー」的な時間がなくなるので大変良いと思う。</p>

<p>また一歩、牛さんと仲良くなれた気がする( ˘ω˘ )</p>


    <div class="social-btns">
    <a href="https://twitter.com/share" class="twitter-share-button"  data-url="http://nakajmg.github.io/blog/2014-01-28/gruntworkflow.html" data-text="Gruntダイエットで健やかな開発を - じまぐてっく">Tweet</a>
    <div class="fb-like" data-href="http://nakajmg.github.io/blog/2014-01-28/gruntworkflow.html" data-send="false" data-layout="button_count" data-width="118" data-show-faces="true"></div>
    <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加" ><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    <div class="g-plusone" data-size="medium"></div>
    <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="en"></a>
  <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="/js/jquery.socialthings.min.js"></script>
<style>
.social-btns{
    margin-bottom: 10px;
}
.social-btns iframe,
.social-btns > div
{
    vertical-align: bottom !important;
}
.social-btns > div:last-of-type iframe{
    height: 20px;
}
</style>
<script>

$(function(){
    $.socialthings.twitter.applyWidgets();
    $.socialthings.facebook.loadJS();
    $.socialthings.gplus.options.lang = 'ja';
    $.socialthings.gplus.applyWidgets();
    $.socialthings.hatebu.applyWidgets();
});

</script>
</article>
      </div>

      <footer class="global-footer">
        <nav class="global-footer__nav">
          <a href="/">HOME</a> <a>･</a>
          <a href="/about.html">ABOUT</a>
        </nav>
        <div class="global-footer__content">
          <i class="icon__author"></i>
          <h3 class="global-footer__title">@nakajmg</h3>
          <div class="global-footer__author">
            <p>Front-end Engineer. 11px
          </div>

          <div class="global-footer__icons">
            <span class="icons icons--twitter">
              <a href="https://twitter.com/nakajmg" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
            </span>
            <span class="icons icons--github">
              <a href="https://github.com/nakajmg" target="_blank" title="GitHub"><i class="icon-github-alt"></i></a>
            </span>
            <span class="icons icons--qiita">
              <a href="http://qiita.com/nakajmg" target="_blank" class="icon__qiita" title="Qiita"></a>
            </span>
          </div>
        </div>
      </footer>
    </section>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46195295-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
